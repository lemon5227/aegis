🛡️ Aegis Protocol: 去中心化论坛架构（理念版）
版本: v4.0 (MVP 导向)
形态: 纯 P2P 桌面应用（Go/Wails + React）

一、 为什么做这个（愿景）
Aegis 的目标不是做“最复杂的链上论坛”，而是做一个**真正可用、抗机器人污染、无中心服务器依赖**的去中心化论坛。

我们优先解决三件事：
1) 正常用户能稳定发帖和看帖。
2) 机器人即使发言，也无法污染公共信息面。
3) 每个参与者都对网络存储有贡献，系统能长期活着。

二、 核心哲学（只保留方向，不锁死实现）
1. 物理级拦截，而非仅 UI 屏蔽
- 机器人内容不是“前端隐藏”，而是后端尽量不接纳、不落公共存储、不继续扩散。

2. Shadow Ban 优先于公开对抗
- 被标记账号仍可在本机看到自己的发言（避免立刻对抗升级）。
- 其他节点不展示、不存储其内容，降低污染和骚扰。

3. 存储平权
- 节点加入网络即承担固定存储义务（100MB）。
- 默认采用私有区 + 公共区思路（例如 20/80），保障“自己体验”与“网络贡献”同时成立。

4. 创世引导，逐步去中心化
- 早期由创世节点与指定管理节点维持秩序。
- 之后过渡到投票治理，减少单点权威。

5. 论坛场景接受弱一致
- 不追求强一致全局排序。
- 接受短时视图差异，目标是“最终可达且可用”。

三、 MVP 只做什么（范围）
MVP 必做：
1) 身份与签名
- 本地生成身份（公私钥），发帖与治理消息都可验签。

2) 基础 P2P 帖子流
- 节点可广播/接收帖子，形成可用时间线。

3) Shadow Ban 闭环
- 管理节点可标记/解封账号。
- 被标记账号：自己可见；他人不可见。

4) 100MB 双分区存储
- 私有区与公共区独立配额、独立淘汰。

5) 最小抗滥用能力
- 无效签名丢弃、超大消息丢弃、基础限速。

MVP 不做（先明确非目标）：
- 不做复杂经济激励。
- 不做强共识排序。
- 不做重型链上治理执行。
- 不做复杂隐私网络（先保留接口）。

四、 成功标准（MVP Done）
满足以下即视为 MVP 可用：
1) 多节点可互相收发帖子。
2) Shadow Ban 生效正确（自己可见、他人不可见）。
3) 节点存储总量固定 100MB，私有/公共区独立淘汰。
4) 常见垃圾流量不会拖垮主流程（签名校验 + 大小限制 + 限速有效）。

五、 文档拆分策略（细节外置）
`ARCHITECTURE.md` 只保留理念、边界和方向。

具体实现细节拆到独立文档（后续逐步补齐）：
- `docs/MVP_PLAN.md`：MVP 任务拆解与里程碑
- `docs/PROTOCOL.md`：消息格式、字段、签名域
- `docs/GOVERNANCE.md`：封禁/解封/申诉/投票规则
- `docs/STORAGE.md`：100MB 分区、LRU、回源策略
- `docs/SECURITY.md`：重放保护、限速、审计日志

六、 当前执行原则
先跑通 MVP，再扩展治理与安全深度。

判定标准很简单：
- 能用 > 完美
- 可演进 > 一次性设计到底
- 清晰边界 > 过早细节化
